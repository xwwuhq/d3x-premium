-- ===============================
-- D3X PREMIUM - LOADER
-- Owner : xwwuhq
-- Secure Loader
-- ===============================

if _G.D3X_LOADER then
    warn("[D3X] Loader d√©j√† ex√©cut√©")
    return
end
_G.D3X_LOADER = true

-- Services
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")

local LocalPlayer = Players.LocalPlayer

-- S√©curit√© basique
if not HttpService.Base64Decode then
    LocalPlayer:Kick("Executor incompatible")
    return
end

print("[D3X] Initialisation du loader...")

-- üîΩ BASE64 DE TON main.lua
local ENCODED_MAIN = [[
LS1bWwoKICAgIOKcqCBEM1ggU1VQUkVNRSAtIEVESVRJT04gVjQgUFJFTUlVTSAodjEuOCAtIE1PRElGSUVEKQoKICAgIE93bmVyOiBYNzcKCiAgICBTdGF0dXM6IEZ1bmN0aW9ucyBBY3RpdmUgLyBVSSBMb2NrZWQgLyBJbnN0YW50IFN0ZWFsIEFkZGVkCgpdXQoKbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCgpsb2NhbCBUd2VlblNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlR3ZWVuU2VydmljZSIpCgpsb2NhbCBVc2VySW5wdXRTZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJVc2VySW5wdXRTZXJ2aWNlIikKCmxvY2FsIFJ1blNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKQoKbG9jYWwgUGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllcgoKbG9jYWwgUGxheWVyR3VpID0gUGxheWVyOldhaXRGb3JDaGlsZCgiUGxheWVyR3VpIikKCi0tIC8vIFRIRU1FIC8vCgpsb2NhbCBUSEVNRSA9IHsKCiAgICBCZyA9IENvbG9yMy5mcm9tUkdCKDE1LCAxNSwgMjApLAoKICAgIFNpZGViYXIgPSBDb2xvcjMuZnJvbVJHQigxMCwgMTAsIDE1KSwKCiAgICBBY2NlbnQgPSBDb2xvcjMuZnJvbVJHQigxNzAsIDAsIDI1NSksCgogICAgU2Vjb25kYXJ5ID0gQ29sb3IzLmZyb21SR0IoMCwgMjU1LCAyNTUpLAoKICAgIFRleHQgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KSwKCiAgICBTdWJUZXh0ID0gQ29sb3IzLmZyb21SR0IoMTUwLCAxNTAsIDE2MCksCgogICAgSXRlbUJnID0gQ29sb3IzLmZyb21SR0IoMjUsIDI1LCAzMCksCgogICAgTWFjUmVkID0gQ29sb3IzLmZyb21SR0IoMjU1LCA5NSwgODcpLAoKICAgIE1hY1llbGxvdyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMTg5LCA0NiksCgogICAgTWFjR3JlZW4gPSBDb2xvcjMuZnJvbVJHQigzOSwgMjAxLCA2MykKCn0KCmxvY2FsIFN0YXRlID0geyBOb0FuaW0gPSBmYWxzZSwgRnBzS2lsbGVyID0gZmFsc2UsIElzTWluaW1pemVkID0gZmFsc2UsIEl0ZW1Fc3BBY3RpdmUgPSBmYWxzZSwgRnBzQm9vc3RBY3RpdmUgPSBmYWxzZSwgUGxheWVyRXNwQWN0aXZlID0gZmFsc2UgfQoKbG9jYWwgU0laRVMgPSB7IEZ1bGwgPSBVRGltMi5uZXcoMCwgNTUwLCAwLCAzMjApLCBNaW5pID0gVURpbTIubmV3KDAsIDE0MCwgMCwgMzIwKSB9CgotLSAvLyAxLiBGT05DVElPTlMgUsOJRUxMRVMgLy8KCi0tIEZvbmN0aW9uIEVTUCBQTEFZRVIgKEhJR0hMSUdIVCkKCmxvY2FsIGZ1bmN0aW9uIGV4ZWN1dGVQbGF5ZXJFc3AoKQoKICAgIGlmIFN0YXRlLlBsYXllckVzcEFjdGl2ZSB0aGVuIHJldHVybiBlbmQKCiAgICBTdGF0ZS5QbGF5ZXJFc3BBY3RpdmUgPSB0cnVlCgogICAgbG9jYWwgZnVuY3Rpb24gYXBwbHlFU1AoY2hhcmFjdGVyKQoKICAgICAgICBpZiBub3QgY2hhcmFjdGVyIHRoZW4gcmV0dXJuIGVuZAoKICAgICAgICBpZiBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkVTUF9ISUdITElHSFQiKSB0aGVuIHJldHVybiBlbmQKCiAgICAgICAgbG9jYWwgaGwgPSBJbnN0YW5jZS5uZXcoIkhpZ2hsaWdodCIpCgogICAgICAgIGhsLk5hbWUgPSAiRVNQX0hJR0hMSUdIVCIKCiAgICAgICAgaGwuQWRvcm5lZSA9IGNoYXJhY3RlcgoKICAgICAgICBobC5GaWxsQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApCgogICAgICAgIGhsLk91dGxpbmVDb2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCkKCiAgICAgICAgaGwuRmlsbFRyYW5zcGFyZW5jeSA9IDAuNgoKICAgICAgICBobC5PdXRsaW5lVHJhbnNwYXJlbmN5ID0gMAoKICAgICAgICBobC5EZXB0aE1vZGUgPSBFbnVtLkhpZ2hsaWdodERlcHRoTW9kZS5BbHdheXNPblRvcAoKICAgICAgICBobC5QYXJlbnQgPSBjaGFyYWN0ZXIKCiAgICBlbmQKCiAgICBsb2NhbCBmdW5jdGlvbiBvblBsYXllcihwbGF5ZXIpCgogICAgICAgIGlmIHBsYXllciA9PSBQbGF5ZXIgdGhlbiByZXR1cm4gZW5kCgogICAgICAgIGlmIHBsYXllci5DaGFyYWN0ZXIgdGhlbiBhcHBseUVTUChwbGF5ZXIuQ2hhcmFjdGVyKSBlbmQKCiAgICAgICAgcGxheWVyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oY2hhcikKCiAgICAgICAgICAgIHRhc2sud2FpdCgxKQoKICAgICAgICAgICAgYXBwbHlFU1AoY2hhcikKCiAgICAgICAgZW5kKQoKICAgIGVuZAoKICAgIGZvciBfLCBwIGluIHBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbyBvblBsYXllcihwKSBlbmQKCiAgICBQbGF5ZXJzLlBsYXllckFkZGVkOkNvbm5lY3Qob25QbGF5ZXIpCgogICAgd2FybigiW0VTUCBQTEFZRVJdIFNpbGhvdWV0dGUgcm91Z2UgYWN0aXbDqWUiKQoKZW5kCgotLSBGb25jdGlvbiBGUFMgQk9PU1QKCmxvY2FsIGZ1bmN0aW9uIGV4ZWN1dGVGcHNCb29zdCgpCgogICAgaWYgU3RhdGUuRnBzQm9vc3RBY3RpdmUgdGhlbiByZXR1cm4gZW5kCgogICAgU3RhdGUuRnBzQm9vc3RBY3RpdmUgPSB0cnVlCgoKCiAgICBsb2NhbCBMaWdodGluZyA9IGdhbWU6R2V0U2VydmljZSgiTGlnaHRpbmciKQoKICAgIGxvY2FsIFdvcmtzcGFjZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikKCiAgICBmb3IgXywgdiBpbiBwYWlycyhMaWdodGluZzpHZXRDaGlsZHJlbigpKSBkbwoKICAgICAgICBpZiB2OklzQSgiQmx1ckVmZmVjdCIpIG9yIHY6SXNBKCJTdW5SYXlzRWZmZWN0Iikgb3IgdjpJc0EoIkNvbG9yQ29ycmVjdGlvbkVmZmVjdCIpIG9yIHY6SXNBKCJCbG9vbUVmZmVjdCIpIG9yIHY6SXNBKCJEZXB0aE9mRmllbGRFZmZlY3QiKSB0aGVuCgogICAgICAgICAgICB2OkRlc3Ryb3koKQoKICAgICAgICBlbmQKCiAgICBlbmQKCiAgICBMaWdodGluZy5HbG9iYWxTaGFkb3dzID0gZmFsc2UKCiAgICBMaWdodGluZy5Gb2dFbmQgPSA5ZTkKCiAgICBMaWdodGluZy5CcmlnaHRuZXNzID0gMQoKICAgIExpZ2h0aW5nLkVudmlyb25tZW50RGlmZnVzZVNjYWxlID0gMAoKICAgIExpZ2h0aW5nLkVudmlyb25tZW50U3BlY3VsYXJTY2FsZSA9IDAKCiAgICBzZXR0aW5ncygpLlJlbmRlcmluZy5RdWFsaXR5TGV2ZWwgPSBFbnVtLlF1YWxpdHlMZXZlbC5MZXZlbDAxCgogICAgZm9yIF8sIG9iaiBpbiBwYWlycyhXb3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSkgZG8KCiAgICAgICAgaWYgb2JqOklzQSgiQmFzZVBhcnQiKSB0aGVuCgogICAgICAgICAgICBvYmouTWF0ZXJpYWwgPSBFbnVtLk1hdGVyaWFsLlBsYXN0aWMKCiAgICAgICAgICAgIG9iai5SZWZsZWN0YW5jZSA9IDAKCiAgICAgICAgICAgIG9iai5DYXN0U2hhZG93ID0gZmFsc2UKCiAgICAgICAgZWxzZWlmIG9iajpJc0EoIkRlY2FsIikgb3Igb2JqOklzQSgiVGV4dHVyZSIpIHRoZW4KCiAgICAgICAgICAgIG9iai5UcmFuc3BhcmVuY3kgPSAxCgogICAgICAgIGVsc2VpZiBvYmo6SXNBKCJQYXJ0aWNsZUVtaXR0ZXIiKSBvciBvYmo6SXNBKCJUcmFpbCIpIG9yIG9iajpJc0EoIlNtb2tlIikgb3Igb2JqOklzQSgiRmlyZSIpIHRoZW4KCiAgICAgICAgICAgIG9iai5FbmFibGVkID0gZmFsc2UKCiAgICAgICAgZW5kCgogICAgZW5kCgogICAgV29ya3NwYWNlLkRlc2NlbmRhbnRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKG9iaikKCiAgICAgICAgdGFzay53YWl0KCkKCiAgICAgICAgaWYgb2JqOklzQSgiQmFzZVBhcnQiKSB0aGVuCgogICAgICAgICAgICBvYmouTWF0ZXJpYWwgPSBFbnVtLk1hdGVyaWFsLlBsYXN0aWMKCiAgICAgICAgICAgIG9iai5DYXN0U2hhZG93ID0gZmFsc2UKCiAgICAgICAgZWxzZWlmIG9iajpJc0EoIkRlY2FsIikgb3Igb2JqOklzQSgiVGV4dHVyZSIpIHRoZW4KCiAgICAgICAgICAgIG9iai5UcmFuc3BhcmVuY3kgPSAxCgogICAgICAgIGVuZAoKICAgIGVuZCkKCiAgICB3YXJuKCJbRlBTIEJPT1NUXSBBY3RpdsOpIikKCmVuZAoKLS0gRm9uY3Rpb24gRVNQIElURU0gSU1BR0UKCmxvY2FsIGZ1bmN0aW9uIGV4ZWN1dGVJdGVtRXNwKCkKCiAgICBpZiBTdGF0ZS5JdGVtRXNwQWN0aXZlIHRoZW4gcmV0dXJuIGVuZAoKICAgIFN0YXRlLkl0ZW1Fc3BBY3RpdmUgPSB0cnVlCgogICAgbG9jYWwgRVNQcyA9IHt9CgogICAgbG9jYWwgTGFzdFRvb2wgPSB7fQoKICAgIGxvY2FsIGZ1bmN0aW9uIGdldFRvb2xJbWFnZSh0b29sKQoKICAgICAgICBpZiB0b29sLlRleHR1cmVJZCBhbmQgdG9vbC5UZXh0dXJlSWQgfj0gIiIgdGhlbiByZXR1cm4gdG9vbC5UZXh0dXJlSWQgZW5kCgogICAgICAgIGxvY2FsIGhhbmRsZSA9IHRvb2w6RmluZEZpcnN0Q2hpbGQoIkhhbmRsZSIpCgogICAgICAgIGlmIGhhbmRsZSB0aGVuCgogICAgICAgICAgICBsb2NhbCBtZXNoID0gaGFuZGxlOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiU3BlY2lhbE1lc2giKQoKICAgICAgICAgICAgaWYgbWVzaCBhbmQgbWVzaC5UZXh0dXJlSWQgfj0gIiIgdGhlbiByZXR1cm4gbWVzaC5UZXh0dXJlSWQgZW5kCgogICAgICAgICAgICBpZiBoYW5kbGU6SXNBKCJNZXNoUGFydCIpIGFuZCBoYW5kbGUuVGV4dHVyZUlEIH49ICIiIHRoZW4gcmV0dXJuIGhhbmRsZS5UZXh0dXJlSUQgZW5kCgogICAgICAgICAgICBmb3IgXywgZCBpbiBpcGFpcnMoaGFuZGxlOkdldERlc2NlbmRhbnRzKCkpIGRvCgogICAgICAgICAgICAgICAgaWYgZDpJc0EoIkRlY2FsIikgb3IgZDpJc0EoIlRleHR1cmUiKSB0aGVuIHJldHVybiBkLlRleHR1cmUgZW5kCgogICAgICAgICAgICBlbmQKCiAgICAgICAgZW5kCgogICAgICAgIHJldHVybiBuaWwKCiAgICBlbmQKCiAgICBsb2NhbCBmdW5jdGlvbiByZW1vdmVFU1AocGxheWVyKQoKICAgICAgICBpZiBFU1BzW3BsYXllcl0gdGhlbgoKICAgICAgICAgICAgRVNQc1twbGF5ZXJdOkRlc3Ryb3koKQoKICAgICAgICAgICAgRVNQc1twbGF5ZXJdID0gbmlsCgogICAgICAgICAgICBMYXN0VG9vbFtwbGF5ZXJdID0gbmlsCgogICAgICAgIGVuZAoKICAgIGVuZAoKICAgIGxvY2FsIGZ1bmN0aW9uIGNyZWF0ZUVTUChwbGF5ZXIsIHRvb2wpCgogICAgICAgIGxvY2FsIGNoYXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCgogICAgICAgIGxvY2FsIGhlYWQgPSBjaGFyIGFuZCBjaGFyOkZpbmRGaXJzdENoaWxkKCJIZWFkIikKCiAgICAgICAgaWYgbm90IGhlYWQgdGhlbiByZXR1cm4gZW5kCgogICAgICAgIGxvY2FsIGltZ0lkID0gZ2V0VG9vbEltYWdlKHRvb2wpCgogICAgICAgIGlmIG5vdCBpbWdJZCB0aGVuIHJldHVybiBlbmQKCiAgICAgICAgbG9jYWwgYmIgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIpCgogICAgICAgIGJiLk5hbWUgPSAiRVNQX0lURU1fSU1BR0UiOyBiYi5BZG9ybmVlID0gaGVhZDsgYmIuU2l6ZSA9IFVEaW0yLm5ldygwLCA2MCwgMCwgNjApCgogICAgICAgIGJiLlN0dWRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMy4yLCAwKTsgYmIuQWx3YXlzT25Ub3AgPSB0cnVlOyBiYi5QYXJlbnQgPSBoZWFkCgogICAgICAgIGxvY2FsIGltZyA9IEluc3RhbmNlLm5ldygiSW1hZ2VMYWJlbCIpCgogICAgICAgIGltZy5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOyBpbWcuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKCiAgICAgICAgaW1nLkltYWdlID0gaW1nSWQ7IGltZy5TY2FsZVR5cGUgPSBFbnVtLlNjYWxlVHlwZS5GaXQ7IGltZy5QYXJlbnQgPSBiYgoKICAgICAgICBFU1BzW3BsYXllcl0gPSBiYgoKICAgICAgICBMYXN0VG9vbFtwbGF5ZXJdID0gdG9vbAoKICAgIGVuZAoKICAgIFJ1blNlcnZpY2UuSGVhcnRiZWF0OkNvbm5lY3QoZnVuY3Rpb24oKQoKICAgICAgICBmb3IgXywgcGxyIGluIGlwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KCiAgICAgICAgICAgIGlmIHBsciB+PSBQbGF5ZXIgdGhlbgoKICAgICAgICAgICAgICAgIGxvY2FsIGNoYXIgPSBwbHIuQ2hhcmFjdGVyCgogICAgICAgICAgICAgICAgbG9jYWwgdG9vbCA9IGNoYXIgYW5kIGNoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJUb29sIikKCiAgICAgICAgICAgICAgICBpZiB0b29sIHRoZW4KCiAgICAgICAgICAgICAgICAgICAgaWYgTGFzdFRvb2xbcGxyXSB+PSB0b29sIHRoZW4KCiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUVTUChwbHIpCgogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVFU1AocGxyLCB0b29sKQoKICAgICAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBlbHNlCgogICAgICAgICAgICAgICAgICAgIHJlbW92ZUVTUChwbHIpCgogICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBlbmQKCiAgICAgICAgZW5kCgogICAgZW5kKQoKICAgIFBsYXllcnMuUGxheWVyUmVtb3Zpbmc6Q29ubmVjdChyZW1vdmVFU1ApCgplbmQKCi0tIEZvbmN0aW9uIERZU0NOCgpsb2NhbCBmdW5jdGlvbiBleGVjdXRlRHlzY24oKQoKICAgIGxvY2FsIEZGbGFncyA9IHsKCiAgICAgICAgR2FtZU5ldFBWSGVhZGVyUm90YXRpb25hbFZlbG9jaXR5WmVyb0N1dG9mZkV4cG9uZW50ID0gLTUwMDAsCgogICAgICAgIExhcmdlUmVwbGljYXRvcldyaXRlNSA9IHRydWUsCgogICAgICAgIExhcmdlUmVwbGljYXRvckVuYWJsZWQ5ID0gdHJ1ZSwKCiAgICAgICAgQW5ndWxhclZlbG9jaXJ5TGltaXQgPSAzNjAsCgogICAgICAgIFRpbWVzdGVwQXJiaXRlclZlbG9jaXR5Q3JpdGVyaWFUaHJlc2hvbGRUd29EdCA9IDIxNDc0ODM2NDYsCgogICAgICAgIFMyUGh5c2ljc1NlbmRlclJhdGUgPSAxNTAwMCwKCiAgICAgICAgRGlzYWJsZURQSVNjYWxlID0gdHJ1ZSwKCiAgICAgICAgTWF4RGF0YVBhY2tldFBlclNlbmQgPSAyMTQ3NDgzNjQ3LAoKICAgICAgICBQaHlzaWNzU2VuZGVyTWF4QmFuZHdpZHRoQnBzID0gMjAwMDAsCgogICAgICAgIFRpbWVzdGVwQXJiaXRlckh1bWFub2lkTGluZWFyVmVsVGhyZXNob2xkID0gMjEsCgogICAgICAgIE1heE1pc3NlZFdvcmxkU3RlcHNSZW1lbWJlcmVkID0gLTIxNDc0ODM2NDgsCgogICAgICAgIFBsYXllckh1bWFub2lkUHJvcGVydHlVcGRhdGVSZXN0cmljdCA9IHRydWUsCgogICAgICAgIFNpbURlZmF1bHRIdW1hbm9pZFRpbWVzdGVwTXVsdGlwbGllciA9IDAsCgogICAgICAgIFN0cmVhbUpvYk5PVVZvbHVtZUxlbmd0aENhcCA9IDIxNDc0ODM2NDcsCgogICAgICAgIERlYnVnU2VuZERpc3RJblN0ZXBzID0gLTIxNDc0ODM2NDgsCgogICAgICAgIEdhbWVOZXREb250U2VuZFJlZHVuZGFudE51bVRpbWVzID0gMSwKCiAgICAgICAgQ2hlY2tQVkxpbmVhclZlbG9jaXR5SW50ZWdyYXRlVnNEZWx0YVBvc2l0aW9uVGhyZXNob2xkUGVyY2VudCA9IDEsCgogICAgICAgIENoZWNrUFZEaWZmZXJlbmNlc0ZvckludGVycG9sYXRpb25NaW5WZWxUaHJlc2hvbGRTdHVkc1BlclNlY0h1bmRyZWR0aCA9IDEsCgogICAgICAgIExhcmdlUmVwbGljYXRvclNlcmlhbGl6ZVJlYWQzID0gdHJ1ZSwKCiAgICAgICAgUmVwbGljYXRpb25Gb2N1c05vdUV4dGVudHNTaXplQ3V0b2ZmRm9yUGF1c2VTdHVkcyA9IDIxNDc0ODM2NDcsCgogICAgICAgIENoZWNrUFZDYWNoZWRWZWxUaHJlc2hvbGRQZXJjZW50ID0gMTAsCgogICAgICAgIENoZWNrUFZEaWZmZXJlbmNlc0ZvckludGVycG9sYXRpb25NaW5Sb3RWZWxUaHJlc2hvbGRSYWRzUGVyU2VjSHVuZHJlZHRoID0gMSwKCiAgICAgICAgR2FtZU5ldERvbnRTZW5kUmVkdW5kYW50RGVsdGFQb3NpdGlvbk1pbGxpb250aCA9IDEsCgogICAgICAgIEludGVycG9sYXRpb25GcmFtZVZlbG9jaXR5VGhyZXNob2xkTWlsbGlvbnRoID0gNSwKCiAgICAgICAgU3RyZWFtSm9iTk9VVm9sdW1lQ2FwID0gMjE0NzQ4MzY0NywKCiAgICAgICAgSW50ZXJwb2xhdGlvbkZyYW1lUm90VmVsb2NpdHlUaHJlc2hvbGRNaWxsaW9udGggPSA1LAoKICAgICAgICBDaGVja1BWQ2FjaGVkUm90VmVsVGhyZXNob2xkUGVyY2VudCA9IDEwLAoKICAgICAgICBXb3JsZFN0ZXBNYXggPSAzMCwKCiAgICAgICAgSW50ZXJwb2xhdGlvbkZyYW1lUG9zaXRpb25UaHJlc2hvbGRNaWxsaW9udGggPSA1LAoKICAgICAgICBUaW1lc3RlcEFyYml0ZXJIdW1hbm9pZFR1cm5pbmdWZWxUaHJlc2hvbGQgPSAxLAoKICAgICAgICBTaW1Pd25lZE5PVUNvdW50VGhyZXNob2xkTWlsbGlvbnRoID0gMjE0NzQ4MzY0NywKCiAgICAgICAgR2FtZU5ldFBWSGVhZGVyTGluZWFyVmVsb2NpdHlaZXJvQ3V0b2ZmRXhwb25lbnQgPSAtNTAwMCwKCiAgICAgICAgTmV4dEdlblJlcGxpY2F0b3JFbmFibGVkV3JpdGU0ID0gdHJ1ZSwKCiAgICAgICAgVGltZXN0ZXBBcmJpdGVyT21lZ2FUaG91ID0gMTA3Mzc0MTgyMywKCiAgICAgICAgTWF4QWNjZXB0YWJsZVVwZGF0ZURlbGF5ID0gMSwKCiAgICAgICAgTGFyZ2VSZXBsaWNhdG9yU2VyaWFsaXplV3JpdGU0ID0gdHJ1ZQoKICAgIH0KCiAgICBsb2NhbCBmdW5jdGlvbiByZXNwYXduYXIocGxyKQoKICAgICAgICBsb2NhbCByY2RFbmFibGVkID0gZmFsc2UKCiAgICAgICAgaWYgZ2V0aGlkZGVuIHRoZW4KCiAgICAgICAgICAgIHJjZEVuYWJsZWQgPSBnZXRoaWRkZW4od29ya3NwYWNlLCAnUmVqZWN0Q2hhcmFjdGVyRGVsZXRpb25zJykgfj0gRW51bS5SZWplY3RDaGFyYWN0ZXJEZWxldGlvbnMuRGlzYWJsZWQKCiAgICAgICAgZW5kCgogICAgICAgIGlmIHJjZEVuYWJsZWQgYW5kIHJlcGxpY2F0ZXNpZ25hbCB0aGVuCgogICAgICAgICAgICByZXBsaWNhdGVzaWduYWwocGxyLkNvbm5lY3REaWVkU2lnbmFsQmFja2VuZCkKCiAgICAgICAgICAgIHRhc2sud2FpdChQbGF5ZXJzLlJlc3Bhd25UaW1lIC0gMC4xKQoKICAgICAgICAgICAgcmVwbGljYXRlc2lnbmFsKHBsci5LaWxsKQoKICAgICAgICBlbHNlCgogICAgICAgICAgICBsb2NhbCBjaGFyID0gcGxyLkNoYXJhY3RlcgoKICAgICAgICAgICAgbG9jYWwgaHVtID0gY2hhcjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCdIdW1hbm9pZCcpCgogICAgICAgICAgICBpZiBodW0gdGhlbiBodW06Q2hhbmdlU3RhdGUoRW51bS5IdW1hbm9pZFN0YXRlVHlwZS5EZWFkKSBlbmQKCiAgICAgICAgICAgIGNoYXI6Q2xlYXJBbGxDaGlsZHJlbigpCgogICAgICAgICAgICBsb2NhbCBuZXdDaGFyID0gSW5zdGFuY2UubmV3KCdNb2RlbCcpCgogICAgICAgICAgICBuZXdDaGFyLlBhcmVudCA9IHdvcmtzcGFjZQoKICAgICAgICAgICAgcGxyLkNoYXJhY3RlciA9IG5ld0NoYXIKCiAgICAgICAgICAgIHRhc2sud2FpdCgpCgogICAgICAgICAgICBwbHIuQ2hhcmFjdGVyID0gY2hhcgoKICAgICAgICAgICAgbmV3Q2hhcjpEZXN0cm95KCkKCiAgICAgICAgZW5kCgogICAgZW5kCgogICAgZm9yIG5hbWUsIHZhbHVlIGluIHBhaXJzKEZGbGFncykgZG8KCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBzZXRmZmxhZyh0b3N0cmluZyhuYW1lKSwgdG9zdHJpbmcodmFsdWUpKSBlbmQpCgogICAgZW5kCgogICAgcmVzcGF3bmFyKFBsYXllcikKCmVuZAoKLS0gQm91Y2xlIEZQUyBLSUxMRVIKCnRhc2suc3Bhd24oZnVuY3Rpb24oKQoKICAgIHdoaWxlIHRydWUgZG8KCiAgICAgICAgaWYgU3RhdGUuRnBzS2lsbGVyIHRoZW4KCiAgICAgICAgICAgIGxvY2FsIGNoYXIgPSBQbGF5ZXIuQ2hhcmFjdGVyCgogICAgICAgICAgICBsb2NhbCBiYWNrcGFjayA9IFBsYXllcjpGaW5kRmlyc3RDaGlsZCgiQmFja3BhY2siKQoKICAgICAgICAgICAgaWYgY2hhciBhbmQgYmFja3BhY2sgdGhlbgoKICAgICAgICAgICAgICAgIGxvY2FsIHRvb2wgPSBjaGFyOkZpbmRGaXJzdENoaWxkKCJCYXQiKSBvciBiYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQmF0IikKCiAgICAgICAgICAgICAgICBpZiB0b29sIHRoZW4KCiAgICAgICAgICAgICAgICAgICAgdG9vbC5QYXJlbnQgPSBjaGFyCgogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpCgogICAgICAgICAgICAgICAgICAgIHRvb2wuUGFyZW50ID0gYmFja3BhY2sKCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIGVuZAoKICAgICAgICBlbmQKCiAgICAgICAgdGFzay53YWl0KDAuMDEpCgogICAgZW5kCgplbmQpCgotLSBGb25jdGlvbiBOTyBBTklNCgpsb2NhbCBmdW5jdGlvbiBhcHBseU5vQW5pbSgpCgogICAgbG9jYWwgY2hhciA9IFBsYXllci5DaGFyYWN0ZXIKCiAgICBpZiBjaGFyIHRoZW4KCiAgICAgICAgbG9jYWwgYW5pbWF0ZSA9IGNoYXI6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdGUiKQoKICAgICAgICBsb2NhbCBodW0gPSBjaGFyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKQoKICAgICAgICBpZiBhbmltYXRlIHRoZW4gYW5pbWF0ZS5EaXNhYmxlZCA9IFN0YXRlLk5vQW5pbSBlbmQKCiAgICAgICAgaWYgU3RhdGUuTm9BbmltIGFuZCBodW0gdGhlbgoKICAgICAgICAgICAgbG9jYWwgYW5pbWF0b3IgPSBodW06RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJBbmltYXRvciIpCgogICAgICAgICAgICBpZiBhbmltYXRvciB0aGVuCgogICAgICAgICAgICAgICAgZm9yIF8sIHRyYWNrIGluIHBhaXJzKGFuaW1hdG9yOkdldFBsYXlpbmdBbmltYXRpb25UcmFja3MoKSkgZG8gdHJhY2s6U3RvcCgpIGVuZAoKICAgICAgICAgICAgZW5kCgogICAgICAgIGVuZAoKICAgIGVuZAoKZW5kCgpQbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbigpCgogICAgdGFzay53YWl0KDAuNSkKCiAgICBpZiBTdGF0ZS5Ob0FuaW0gdGhlbiBhcHBseU5vQW5pbSgpIGVuZAoKZW5kKQoKLS0gLy8gMi4gSU5URVJGQUNFIC8vCgppZiBQbGF5ZXJHdWk6RmluZEZpcnN0Q2hpbGQoIkQzWF9WNCIpIHRoZW4gUGxheWVyR3VpLkQzWF9WNDpEZXN0cm95KCkgZW5kCgpsb2NhbCBTY3JlZW5HdWkgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpCgpTY3JlZW5HdWkuTmFtZSA9ICJEM1hfVjQiOyBTY3JlZW5HdWkuUmVzZXRPblNwYXduID0gZmFsc2U7IFNjcmVlbkd1aS5QYXJlbnQgPSBQbGF5ZXJHdWkKCmxvY2FsIE1haW5GcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQoKTWFpbkZyYW1lLk5hbWUgPSAiTWFpbkZyYW1lIjsgTWFpbkZyYW1lLlNpemUgPSBTSVpFUy5GdWxsOyBNYWluRnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjUsIDApCgpNYWluRnJhbWUuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSk7IE1haW5GcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gVEhFTUUuQmcKCk1haW5GcmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC4xNTsgTWFpbkZyYW1lLkNsaXBzRGVzY2VuZGFudHMgPSB0cnVlOyBNYWluRnJhbWUuVmlzaWJsZSA9IGZhbHNlOyBNYWluRnJhbWUuUGFyZW50ID0gU2NyZWVuR3VpCgpJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIiwgTWFpbkZyYW1lKS5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCAxMikKCkluc3RhbmNlLm5ldygiVUlTdHJva2UiLCBNYWluRnJhbWUpLkNvbG9yID0gQ29sb3IzLmZyb21SR0IoNjAsNjAsNzApCgotLSBTSURFQkFSCgpsb2NhbCBTaWRlYmFyID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCgpTaWRlYmFyLk5hbWUgPSAiU2lkZWJhciI7IFNpZGViYXIuU2l6ZSA9IFVEaW0yLm5ldygwLCAxNDAsIDEsIDApOyBTaWRlYmFyLkJhY2tncm91bmRDb2xvcjMgPSBUSEVNRS5TaWRlYmFyCgpTaWRlYmFyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjE7IFNpZGViYXIuUGFyZW50ID0gTWFpbkZyYW1lCgpJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIiwgU2lkZWJhcikuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMTIpCgpsb2NhbCBTaWRlYmFyT3ZlcmxheSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQoKU2lkZWJhck92ZXJsYXkuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMCwgMSwgMCk7IFNpZGViYXJPdmVybGF5LlBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0yMCwgMCwgMCkKClNpZGViYXJPdmVybGF5LkJhY2tncm91bmRDb2xvcjMgPSBUSEVNRS5TaWRlYmFyOyBTaWRlYmFyT3ZlcmxheS5Cb3JkZXJTaXplUGl4ZWwgPSAwOyBTaWRlYmFyT3ZlcmxheS5QYXJlbnQgPSBTaWRlYmFyCgpsb2NhbCBTaWRlTGluZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQoKU2lkZUxpbmUuU2l6ZSA9IFVEaW0yLm5ldygwLCAxLCAxLCAwKTsgU2lkZUxpbmUuUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgMCwgMCwgMCkKClNpZGVMaW5lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NSwgNDUsIDU1KTsgU2lkZUxpbmUuQm9yZGVyU2l6ZVBpeGVsID0gMDsgU2lkZUxpbmUuUGFyZW50ID0gU2lkZWJhcgoKLS0gQk9VVE9OUyBNQUMKCmxvY2FsIE1hY0NvbnRhaW5lciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQoKTWFjQ29udGFpbmVyLlNpemUgPSBVRGltMi5uZXcoMCwgNjAsIDAsIDIwKTsgTWFjQ29udGFpbmVyLlBvc2l0aW9uID0gVURpbTIubmV3KDEsIC03MCwgMCwgMTUpCgpNYWNDb250YWluZXIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7IE1hY0NvbnRhaW5lci5aSW5kZXggPSAxMDA7IE1hY0NvbnRhaW5lci5QYXJlbnQgPSBNYWluRnJhbWUKCmxvY2FsIGZ1bmN0aW9uIGNyZWF0ZU1hY0RvdChjb2xvciwgeFBvcywgY2FsbGJhY2spCgogICAgbG9jYWwgZG90ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCiAgICBkb3QuU2l6ZSA9IFVEaW0yLm5ldygwLCAxMiwgMCwgMTIpOyBkb3QuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgeFBvcywgMCwgMCkKCiAgICBkb3QuQmFja2dyb3VuZENvbG9yMyA9IGNvbG9yOyBkb3QuVGV4dCA9ICIiOyBkb3QuUGFyZW50ID0gTWFjQ29udGFpbmVyCgogICAgSW5zdGFuY2UubmV3KCJVSUNvcm5lciIsIGRvdCkuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMSwwKQoKICAgIGRvdC5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGNhbGxiYWNrKQoKZW5kCgpjcmVhdGVNYWNEb3QoVEhFTUUuTWFjR3JlZW4sIDAsIGZ1bmN0aW9uKCkgCgogICAgU3RhdGUuSXNNaW5pbWl6ZWQgPSBmYWxzZQoKICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoTWFpbkZyYW1lLCBUd2VlbkluZm8ubmV3KDAuNCwgRW51bS5FYXNpbmdTdHlsZS5CYWNrKSwge1NpemUgPSBTSVpFUy5GdWxsfSk6UGxheSgpCgplbmQpCgpjcmVhdGVNYWNEb3QoVEhFTUUuTWFjWWVsbG93LCAxOCwgZnVuY3Rpb24oKSAKCiAgICBTdGF0ZS5Jc01pbmltaXplZCA9IHRydWUKCiAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKE1haW5GcmFtZSwgVHdlZW5JbmZvLm5ldygwLjQsIEVudW0uRWFzaW5nU3R5bGUuUXVhcnQpLCB7U2l6ZSA9IFNJWkVTLk1pbml9KTpQbGF5KCkKCmVuZCkKCmNyZWF0ZU1hY0RvdChUSEVNRS5NYWNSZWQsIDM2LCBmdW5jdGlvbigpIE1haW5GcmFtZS5WaXNpYmxlID0gZmFsc2UgZW5kKQoKLS0gVElUUkVTCgpsb2NhbCBBcHBUaXRsZSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKCkFwcFRpdGxlLlRleHQgPSAiRDNYIEJFVEEiOyBBcHBUaXRsZS5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJsYWNrOyBBcHBUaXRsZS5UZXh0U2l6ZSA9IDIwCgpBcHBUaXRsZS5UZXh0Q29sb3IzID0gVEhFTUUuU2Vjb25kYXJ5OyBBcHBUaXRsZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDMwKQoKQXBwVGl0bGUuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTIsIDAsIDIwKTsgQXBwVGl0bGUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKCkFwcFRpdGxlLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0OyBBcHBUaXRsZS5QYXJlbnQgPSBTaWRlYmFyCgpsb2NhbCBWZXJMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKClZlckxhYmVsLlRleHQgPSAidjEuMSB8IFBSRU1JVU0iOyBWZXJMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQ7IFZlckxhYmVsLlRleHRTaXplID0gOQoKVmVyTGFiZWwuVGV4dENvbG9yMyA9IFRIRU1FLlN1YlRleHQ7IFZlckxhYmVsLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEyLCAwLCA0MykKClZlckxhYmVsLlNpemUgPSBVRGltMi5uZXcoMCwgMTAwLCAwLCAxNSk7IFZlckxhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCgpWZXJMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdDsgVmVyTGFiZWwuUGFyZW50ID0gU2lkZWJhcgoKLS0gUEFHRSBTWVNURU0KCmxvY2FsIFBhZ2VDb250YWluZXIgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKClBhZ2VDb250YWluZXIuTmFtZSA9ICJQYWdlQ29udGFpbmVyIjsgUGFnZUNvbnRhaW5lci5TaXplID0gVURpbTIubmV3KDEsIC0xNjAsIDEsIC02MCkKClBhZ2VDb250YWluZXIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTUwLCAwLCA1MCk7IFBhZ2VDb250YWluZXIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7IFBhZ2VDb250YWluZXIuUGFyZW50ID0gTWFpbkZyYW1lCgpsb2NhbCBQYWdlcyA9IHsgCgogICAgSG9tZSA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKSwgCgogICAgRXNwID0gSW5zdGFuY2UubmV3KCJTY3JvbGxpbmdGcmFtZSIpLAoKICAgIEJvb3N0ID0gSW5zdGFuY2UubmV3KCJTY3JvbGxpbmdGcmFtZSIpCgp9Cgpmb3IgbmFtZSwgZnJhbWUgaW4gcGFpcnMoUGFnZXMpIGRvCgogICAgZnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsgZnJhbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7IGZyYW1lLlNjcm9sbEJhclRoaWNrbmVzcyA9IDAKCiAgICBmcmFtZS5WaXNpYmxlID0gKG5hbWUgPT0gIkhvbWUiKTsgZnJhbWUuUGFyZW50ID0gUGFnZUNvbnRhaW5lcgoKZW5kCgotLSBUQUJTCgpsb2NhbCBmdW5jdGlvbiBjcmVhdGVUYWIodGV4dCwgdGFyZ2V0LCB5UG9zKQoKICAgIGxvY2FsIGJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCgogICAgYnRuLlNpemUgPSBVRGltMi5uZXcoMC44NSwgMCwgMCwgMzUpOyBidG4uUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wNywgMCwgMCwgeVBvcykKCiAgICBidG4uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7IGJ0bi5UZXh0ID0gIiAgICIgLi4gdGV4dDsgYnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAoKICAgIGJ0bi5UZXh0U2l6ZSA9IDEyOyBidG4uVGV4dENvbG9yMyA9IFRIRU1FLlN1YlRleHQ7IGJ0bi5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdDsgYnRuLlBhcmVudCA9IFNpZGViYXIKCiAgICBsb2NhbCBpbmQgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKCiAgICBpbmQuU2l6ZSA9IFVEaW0yLm5ldygwLCAzLCAwLjUsIDApOyBpbmQuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMC4yNSwgMCk7IGluZC5CYWNrZ3JvdW5kQ29sb3IzID0gVEhFTUUuQWNjZW50CgogICAgaW5kLlZpc2libGUgPSAodGFyZ2V0ID09ICJIb21lIik7IGluZC5QYXJlbnQgPSBidG4KCiAgICBidG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCgogICAgICAgIGZvciBfLHYgaW4gcGFpcnMoU2lkZWJhcjpHZXRDaGlsZHJlbigpKSBkbyBpZiB2OklzQSgiVGV4dEJ1dHRvbiIpIHRoZW4gdi5UZXh0Q29sb3IzID0gVEhFTUUuU3ViVGV4dCBpZiB2OkZpbmRGaXJzdENoaWxkKCJGcmFtZSIpIHRoZW4gdi5GcmFtZS5WaXNpYmxlID0gZmFsc2UgZW5kIGVuZCBlbmQKCiAgICAgICAgYnRuLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsMSwxKTsgaW5kLlZpc2libGUgPSB0cnVlCgogICAgICAgIGZvciBuLCBmIGluIHBhaXJzKFBhZ2VzKSBkbyBmLlZpc2libGUgPSAobiA9PSB0YXJnZXQpIGVuZAoKICAgIGVuZCkKCiAgICByZXR1cm4gYnRuCgplbmQKCmNyZWF0ZVRhYigiSE9NRSIsICJIb21lIiwgOTApLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsMSwxKQoKY3JlYXRlVGFiKCJFU1AiLCAiRXNwIiwgMTMwKQoKY3JlYXRlVGFiKCJCT09TVCIsICJCb29zdCIsIDE3MCkKCi0tIERJU0NPUkQKCmxvY2FsIERpc2NvcmRCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoKRGlzY29yZEJ0bi5TaXplID0gVURpbTIubmV3KDAuOCwgMCwgMCwgMjgpOyBEaXNjb3JkQnRuLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMSwgMCwgMC42NSwgMCkKCkRpc2NvcmRCdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDg4LCAxMDEsIDI0Mik7IERpc2NvcmRCdG4uVGV4dCA9ICJDT1BZIERJU0NPUkQiCgpEaXNjb3JkQnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZDsgRGlzY29yZEJ0bi5UZXh0U2l6ZSA9IDEwOyBEaXNjb3JkQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsMSwxKTsgRGlzY29yZEJ0bi5QYXJlbnQgPSBTaWRlYmFyCgpJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIiwgRGlzY29yZEJ0bikuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNikKCkRpc2NvcmRCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpIHNldGNsaXBib2FyZCgiaHR0cHM6Ly9kaXNjb3JkLmdnL0R6UUJNRTdCakoiKSBEaXNjb3JkQnRuLlRleHQgPSAiQ09QSUVEISIgdGFzay53YWl0KDIpIERpc2NvcmRCdG4uVGV4dCA9ICJDT1BZIERJU0NPUkQiIGVuZCkKCi0tIFBST0ZJTAoKbG9jYWwgUHJvZmlsZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQoKUHJvZmlsZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDY1KTsgUHJvZmlsZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAxLCAtNjUpOyBQcm9maWxlLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMubmV3KDAsMCwwKQoKUHJvZmlsZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC42OyBQcm9maWxlLlBhcmVudCA9IFNpZGViYXI7IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiLCBQcm9maWxlKS5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCAxMikKCmxvY2FsIE5hbWVMYmwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCgpOYW1lTGJsLlRleHQgPSBQbGF5ZXIuRGlzcGxheU5hbWU7IE5hbWVMYmwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkOyBOYW1lTGJsLlRleHRTaXplID0gMTEKCk5hbWVMYmwuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwxLDEpOyBOYW1lTGJsLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEyLCAwLCAxNSkKCk5hbWVMYmwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7IE5hbWVMYmwuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQ7IE5hbWVMYmwuUGFyZW50ID0gUHJvZmlsZQoKbG9jYWwgT3duZXJMYmwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCgpPd25lckxibC5UZXh0ID0gIk93bmVyIGJ5IFg3NyI7IE93bmVyTGJsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtOyBPd25lckxibC5UZXh0U2l6ZSA9IDkKCk93bmVyTGJsLlRleHRDb2xvcjMgPSBUSEVNRS5TdWJUZXh0OyBPd25lckxibC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMiwgMCwgMzIpOyBPd25lckxibC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsgT3duZXJMYmwuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQ7IE93bmVyTGJsLlBhcmVudCA9IFByb2ZpbGUKCi0tIEZFQVRVUkVTIEdFTkVSQVRPUgoKbG9jYWwgZnVuY3Rpb24gY3JlYXRlRmVhdHVyZUJ0bih0ZXh0LCBkZXNjLCB5T3JkZXIsIHBhcmVudFBhZ2UsIGNhbGxiYWNrKQoKICAgIGxvY2FsIGJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCgogICAgYnRuLlNpemUgPSBVRGltMi5uZXcoMC45NSwgMCwgMCwgNTUpOyBidG4uUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMCArICh5T3JkZXItMSkqNjIpCgogICAgYnRuLkJhY2tncm91bmRDb2xvcjMgPSBUSEVNRS5JdGVtQmc7IGJ0bi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC40OyBidG4uVGV4dCA9ICIiOyBidG4uUGFyZW50ID0gcGFyZW50UGFnZQoKICAgIEluc3RhbmNlLm5ldygiVUlDb3JuZXIiLCBidG4pLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDgpCgogICAgbG9jYWwgdCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKCiAgICB0LlRleHQgPSB0ZXh0OyB0LkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZDsgdC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLDEsMSk7IHQuVGV4dFNpemUgPSAxNAoKICAgIHQuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTUsIDAuMjUsIDApOyB0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOyB0LlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0OyB0LlBhcmVudCA9IGJ0bgoKICAgIGxvY2FsIGQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCgogICAgZC5UZXh0ID0gZGVzYzsgZC5Gb250ID0gRW51bS5Gb250LkdvdGhhbTsgZC5UZXh0Q29sb3IzID0gVEhFTUUuU3ViVGV4dDsgZC5UZXh0U2l6ZSA9IDEwCgogICAgZC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxNSwgMC42LCAwKTsgZC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsgZC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdDsgZC5QYXJlbnQgPSBidG4KCiAgICBidG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpIGNhbGxiYWNrKHQpIGVuZCkKCmVuZAoKLS0gLy8gQVNTSUdOQVRJT04gREVTIEJPVVRPTlMgLy8KCi0tIFBBR0UgSE9NRQoKY3JlYXRlRmVhdHVyZUJ0bigiRFlTQ04iLCAiSW5qZWN0IFBoeXNpY3MgRkZsYWdzIiwgMSwgUGFnZXMuSG9tZSwgZnVuY3Rpb24odCkgCgogICAgdC5UZXh0Q29sb3IzID0gVEhFTUUuU2Vjb25kYXJ5OyB0LlRleHQgPSAiRFlTQ04gOiBBQ1RJVkUiOyBleGVjdXRlRHlzY24oKSAKCmVuZCkKCmNyZWF0ZUZlYXR1cmVCdG4oIkZQUyBLSUxMRVIiLCAiTGFnIFN3aXRjaCBNb2RlIChOZWVkIEJhdCkiLCAyLCBQYWdlcy5Ib21lLCBmdW5jdGlvbih0KSAKCiAgICBTdGF0ZS5GcHNLaWxsZXIgPSBub3QgU3RhdGUuRnBzS2lsbGVyOyB0LlRleHRDb2xvcjMgPSBTdGF0ZS5GcHNLaWxsZXIgYW5kIFRIRU1FLk1hY1JlZCBvciBDb2xvcjMubmV3KDEsMSwxKTsgdC5UZXh0ID0gU3RhdGUuRnBzS2lsbGVyIGFuZCAiRlBTIEtJTExFUiA6IE9OIiBvciAiRlBTIEtJTExFUiIKCmVuZCkKCmNyZWF0ZUZlYXR1cmVCdG4oIk5PIEFOSU0iLCAiRGlzYWJsZSBDaGFyYWN0ZXIgQW5pbWF0aW9ucyIsIDMsIFBhZ2VzLkhvbWUsIGZ1bmN0aW9uKHQpIAoKICAgIFN0YXRlLk5vQW5pbSA9IG5vdCBTdGF0ZS5Ob0FuaW07IHQuVGV4dENvbG9yMyA9IFN0YXRlLk5vQW5pbSBhbmQgVEhFTUUuTWFjR3JlZW4gb3IgQ29sb3IzLm5ldygxLDEsMSk7IHQuVGV4dCA9IFN0YXRlLk5vQW5pbSBhbmQgIk5PIEFOSU0gOiBPTiIgb3IgIk5PIEFOSU0iOyBhcHBseU5vQW5pbSgpCgplbmQpCgotLSDwn5+iIE5PVVZFQVUgQk9VVE9OIEFKT1VUw4kgSUNJIDogSU5TVEFOVCBTVEVBTCDwn5+iCgpjcmVhdGVGZWF0dXJlQnRuKCJJTlNUQU5UIFNURUFMIiwgIk9wZW4gR2FsYXh5IFVJIChTYXZlIEJhc2UgJiBUUCkiLCA0LCBQYWdlcy5Ib21lLCBmdW5jdGlvbih0KQoKICAgIHQuVGV4dENvbG9yMyA9IFRIRU1FLlNlY29uZGFyeQoKICAgIHQuVGV4dCA9ICJMQVVOQ0hFRCIKCiAgICAtLSBERUJVVCBEVSBTQ1JJUFQgR0FMQVhZIFVJCgogICAgbG9jYWwgR2FsYXh5UGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCgogICAgbG9jYWwgR2FsYXh5VHdlZW4gPSBnYW1lOkdldFNlcnZpY2UoIlR3ZWVuU2VydmljZSIpCgogICAgbG9jYWwgR2FsYXh5UGxheWVyID0gR2FsYXh5UGxheWVycy5Mb2NhbFBsYXllcgoKICAgIGxvY2FsIEJBU0VfQ0YgPSBuaWwKCiAgICBsb2NhbCBmdW5jdGlvbiB0cEJhc2UoKQoKICAgICAgICBsb2NhbCBjaGFyID0gR2FsYXh5UGxheWVyLkNoYXJhY3RlcgoKICAgICAgICBpZiBub3QgY2hhciBvciBub3QgQkFTRV9DRiB0aGVuIHJldHVybiBlbmQKCiAgICAgICAgbG9jYWwgaHJwID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCgogICAgICAgIGlmIGhycCB0aGVuIGhycC5DRnJhbWUgPSBCQVNFX0NGICsgVmVjdG9yMy5uZXcoMCwgMywgMCkgZW5kCgogICAgZW5kCgogICAgaWYgZ2FtZS5Db3JlR3VpOkZpbmRGaXJzdENoaWxkKCJEM1hfR0FMQVhZIikgdGhlbiBnYW1lLkNvcmVHdWkuRDNYX0dBTEFYWTpEZXN0cm95KCkgZW5kCgogICAgbG9jYWwgZ3VpID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQoKICAgIGd1aS5OYW1lID0gIkQzWF9HQUxBWFkiCgogICAgZ3VpLlBhcmVudCA9IGdhbWUuQ29yZUd1aQoKICAgIGxvY2FsIGZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCmZyYW1lLlNpemUgPSBVRGltMi5uZXcoMCwgMzAwLCAwLCAyMDApCmZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgLTE1MCwgMC41LCAtMTAwKQpmcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gVEhFTUUuQmcKZnJhbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuMQpmcmFtZS5QYXJlbnQgPSBndWkKSW5zdGFuY2UubmV3KCJVSUNvcm5lciIsIGZyYW1lKS5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLDEyKQoKbG9jYWwgdGl0bGUgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCnRpdGxlLlRleHQgPSAiR0FMQVhZIFVJIgp0aXRsZS5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJsYWNrCnRpdGxlLlRleHRTaXplID0gMTYKdGl0bGUuVGV4dENvbG9yMyA9IFRIRU1FLlNlY29uZGFyeQp0aXRsZS5TaXplID0gVURpbTIubmV3KDEsMCwwLDMwKQp0aXRsZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLDAsMCwxMCkKdGl0bGUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKdGl0bGUuUGFyZW50ID0gZnJhbWUKCi0tIEJvdXRvbiBUUCBCYXNlCmxvY2FsIHRwQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKdHBCdG4uVGV4dCA9ICJUUCBUTyBCQVNFIgp0cEJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKdHBCdG4uVGV4dFNpemUgPSAxMgp0cEJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLDEsMSkKdHBCdG4uU2l6ZSA9IFVEaW0yLm5ldygwLjgsMCwwLDMwKQp0cEJ0bi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjEsMCwwLjMsMCkKdHBCdG4uQmFja2dyb3VuZENvbG9yMyA9IFRIRU1FLkFjY2VudAp0cEJ0bi5QYXJlbnQgPSBmcmFtZQpJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIiwgdHBCdG4pLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsOCkKCnRwQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QodHBCYXNlKQoKLS0gU3RvY2tlciBsYSBwb3NpdGlvbiBkZSBiYXNlCmxvY2FsIHN0b3JlQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKc3RvcmVCdG4uVGV4dCA9ICJTVE9SRSBCQVNFIgpzdG9yZUJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKc3RvcmVCdG4uVGV4dFNpemUgPSAxMgpzdG9yZUJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLDEsMSkKc3RvcmVCdG4uU2l6ZSA9IFVEaW0yLm5ldygwLjgsMCwwLDMwKQpzdG9yZUJ0bi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjEsMCwwLjU1LDApCnN0b3JlQnRuLkJhY2tncm91bmRDb2xvcjMgPSBUSEVNRS5TZWNvbmRhcnkKc3RvcmVCdG4uUGFyZW50ID0gZnJhbWUKSW5zdGFuY2UubmV3KCJVSUNvcm5lciIsIHN0b3JlQnRuKS5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLDgpCgpzdG9yZUJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGxvY2FsIGNoYXIgPSBHYWxheHlQbGF5ZXIuQ2hhcmFjdGVyCiAgICBpZiBjaGFyIHRoZW4KICAgICAgICBsb2NhbCBocnAgPSBjaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICBpZiBocnAgdGhlbgogICAgICAgICAgICBCQVNFX0NGID0gaHJwLkNGcmFtZQogICAgICAgICAgICBzdG9yZUJ0bi5UZXh0ID0gIkJBU0UgU1RPUkVEIgogICAgICAgICAgICB0YXNrLmRlbGF5KDIsZnVuY3Rpb24oKSBzdG9yZUJ0bi5UZXh0ID0gIlNUT1JFIEJBU0UiIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAplbmQpCgotLSBBam91dGVyIHVuIGJvdXRvbiBwb3VyIGZlcm1lcgpsb2NhbCBjbG9zZUJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCmNsb3NlQnRuLlRleHQgPSAiWCIKY2xvc2VCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCmNsb3NlQnRuLlRleHRTaXplID0gMTQKY2xvc2VCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwxLDEpCmNsb3NlQnRuLlNpemUgPSBVRGltMi5uZXcoMCwyNSwwLDI1KQpjbG9zZUJ0bi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygxLC0zMCwwLDUpCmNsb3NlQnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxNTAsMCwwKQpjbG9zZUJ0bi5QYXJlbnQgPSBmcmFtZQpJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIiwgY2xvc2VCdG4pLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDEsMCkKY2xvc2VCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpIGd1aTpEZXN0cm95KCkgZW5kKQoKLS0gRklOIEdBTEFYWSBVSQplbmQpCgotLSBQQUdFIEVTUApjcmVhdGVGZWF0dXJlQnRuKCJQTEFZRVIgRVNQIiwgIlNpbGhvdWV0dGUgUm91Z2UiLCAxLCBQYWdlcy5Fc3AsIGZ1bmN0aW9uKHQpCiAgICB0LlRleHRDb2xvcjMgPSBUSEVNRS5TZWNvbmRhcnk7IHQuVGV4dCA9ICJQTEFZRVIgRVNQIDogT04iCiAgICBleGVjdXRlUGxheWVyRXNwKCkKZW5kKQoKY3JlYXRlRmVhdHVyZUJ0bigiSVRFTSBFU1AiLCAiQWZmaWNoZSBsJ2ltYWdlIGRlIGwnb2JqZXQiLCAyLCBQYWdlcy5Fc3AsIGZ1bmN0aW9uKHQpCiAgICB0LlRleHRDb2xvcjMgPSBUSEVNRS5TZWNvbmRhcnk7IHQuVGV4dCA9ICJJVEVNIEVTUCA6IE9OIgogICAgZXhlY3V0ZUl0ZW1Fc3AoKQplbmQpCgotLSBQQUdFIEJPT1NUCmNyZWF0ZUZlYXR1cmVCdG4oIkZQUyBCT09TVCIsICJPcHRpbWlzYXRpb24gbWF4aW1hbGUiLCAxLCBQYWdlcy5Cb29zdCwgZnVuY3Rpb24odCkKICAgIHQuVGV4dENvbG9yMyA9IFRIRU1FLlNlY29uZGFyeTsgdC5UZXh0ID0gIkZQUyBCT09TVCA6IE9OIgogICAgZXhlY3V0ZUZwc0Jvb3N0KCkKZW5kKQ==
]]

-- D√©codage
local success, decoded = pcall(function()
    return HttpService:Base64Decode(ENCODED_MAIN)
end)

if not success then
    warn("[D3X] Erreur de d√©codage")
    return
end

print("[D3X] D√©codage r√©ussi")

-- Ex√©cution prot√©g√©e
local execSuccess, execError = pcall(function()
    loadstring(decoded)()
end)

if not execSuccess then
    warn("[D3X] Erreur d'ex√©cution : "..tostring(execError))
else
    print("[D3X] Script lanc√© avec succ√®s")
end