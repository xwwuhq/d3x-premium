GFyYWN0ZXIKCiAgICAgICAgaWYgbm90IGNoYXIgb3Igbm90IEJBU0VfQ0YgdGhlbiByZXR1cm4gZW5kCgogICAgICAgIGxvY2FsIGhycCA9IGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQoKICAgICAgICBpZiBocnAgdGhlbiBocnAuQ0ZyYW1lID0gQkFTRV9DRiArIFZlY3RvcjMubmV3KDAsIDMsIDApIGVuZAoKICAgIGVuZAoKICAgIGlmIGdhbWUuQ29yZUd1aTpGaW5kRmlyc3RDaGlsZCgiRDNYX0dBTEFYWSIpIHRoZW4gZ2FtZS5Db3JlR3VpLkQzWF9HQUxBWFk6RGVzdHJveSgpIGVuZAoKICAgIGxvY2FsIGd1aSA9IEluc3RhbmNlLm5ldygiU2NyZWVuR3VpIikKCiAgICBndWkuTmFtZSA9ICJEM1hfR0FMQVhZIgoKICAgIGd1aS5QYXJlbnQgPSBnYW1lLkNvcmVHdWkKCiAgICBsb2NhbCBmcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQpmcmFtZS5TaXplID0gVURpbTIubmV3KDAsIDMwMCwgMCwgMjAwKQpmcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIC0xNTAsIDAuNSwgLTEwMCkKZnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IFRIRU1FLkJnCmZyYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjEKZnJhbWUuUGFyZW50ID0gZ3VpCkluc3RhbmNlLm5ldygiVUlDb3JuZXIiLCBmcmFtZSkuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwxMikKCmxvY2FsIHRpdGxlID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQp0aXRsZS5UZXh0ID0gIkdBTEFYWSBVSSIKdGl0bGUuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1CbGFjawp0aXRsZS5UZXh0U2l6ZSA9IDE2CnRpdGxlLlRleHRDb2xvcjMgPSBUSEVNRS5TZWNvbmRhcnkKdGl0bGUuU2l6ZSA9IFVEaW0yLm5ldygxLDAsMCwzMCkKdGl0bGUuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwwLDAsMTApCnRpdGxlLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCnRpdGxlLlBhcmVudCA9IGZyYW1lCgotLSBCb3V0b24gVFAgQmFzZQpsb2NhbCB0cEJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCnRwQnRuLlRleHQgPSAiVFAgVE8gQkFTRSIKdHBCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCnRwQnRuLlRleHRTaXplID0gMTIKdHBCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwxLDEpCnRwQnRuLlNpemUgPSBVRGltMi5uZXcoMC44LDAsMCwzMCkKdHBCdG4uUG9zaXRpb24gPSBVRGltMi5uZXcoMC4xLDAsMC4zLDApCnRwQnRuLkJhY2tncm91bmRDb2xvcjMgPSBUSEVNRS5BY2NlbnQKdHBCdG4uUGFyZW50ID0gZnJhbWUKSW5zdGFuY2UubmV3KCJVSUNvcm5lciIsIHRwQnRuKS5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLDgpCgp0cEJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KHRwQmFzZSkKCi0tIFN0b2NrZXIgbGEgcG9zaXRpb24gZGUgYmFzZQpsb2NhbCBzdG9yZUJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCnN0b3JlQnRuLlRleHQgPSAiU1RPUkUgQkFTRSIKc3RvcmVCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCnN0b3JlQnRuLlRleHRTaXplID0gMTIKc3RvcmVCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwxLDEpCnN0b3JlQnRuLlNpemUgPSBVRGltMi5uZXcoMC44LDAsMCwzMCkKc3RvcmVCdG4uUG9zaXRpb24gPSBVRGltMi5uZXcoMC4xLDAsMC41NSwwKQpzdG9yZUJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gVEhFTUUuU2Vjb25kYXJ5CnN0b3JlQnRuLlBhcmVudCA9IGZyYW1lCkluc3RhbmNlLm5ldygiVUlDb3JuZXIiLCBzdG9yZUJ0bikuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCw4KQoKc3RvcmVCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBsb2NhbCBjaGFyID0gR2FsYXh5UGxheWVyLkNoYXJhY3RlcgogICAgaWYgY2hhciB0aGVuCiAgICAgICAgbG9jYWwgaHJwID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgaWYgaHJwIHRoZW4KICAgICAgICAgICAgQkFTRV9DRiA9IGhycC5DRnJhbWUKICAgICAgICAgICAgc3RvcmVCdG4uVGV4dCA9ICJCQVNFIFNUT1JFRCIKICAgICAgICAgICAgdGFzay5kZWxheSgyLGZ1bmN0aW9uKCkgc3RvcmVCdG4uVGV4dCA9ICJTVE9SRSBCQVNFIiBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKQoKLS0gQWpvdXRlciB1biBib3V0b24gcG91ciBmZXJtZXIKbG9jYWwgY2xvc2VCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQpjbG9zZUJ0bi5UZXh0ID0gIlgiCmNsb3NlQnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZApjbG9zZUJ0bi5UZXh0U2l6ZSA9IDE0CmNsb3NlQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsMSwxKQpjbG9zZUJ0bi5TaXplID0gVURpbTIubmV3KDAsMjUsMCwyNSkKY2xvc2VCdG4uUG9zaXRpb24gPSBVRGltMi5uZXcoMSwtMzAsMCw1KQpjbG9zZUJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTUwLDAsMCkKY2xvc2VCdG4uUGFyZW50ID0gZnJhbWUKSW5zdGFuY2UubmV3KCJVSUNvcm5lciIsIGNsb3NlQnRuKS5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygxLDApCmNsb3NlQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKSBndWk6RGVzdHJveSgpIGVuZCkKCi0tIEZJTiBHQUxBWFkgVUkKZW5kKQoKLS0gUEFHRSBFU1AKY3JlYXRlRmVhdHVyZUJ0bigiUExBWUVSIEVTUCIsICJTaWxob3VldHRlIFJvdWdlIiwgMSwgUGFnZXMuRXNwLCBmdW5jdGlvbih0KQogICAgdC5UZXh0Q29sb3IzID0gVEhFTUUuU2Vjb25kYXJ5OyB0LlRleHQgPSAiUExBWUVSIEVTUCA6IE9OIgogICAgZXhlY3V0ZVBsYXllckVzcCgpCmVuZCkKCmNyZWF0ZUZlYXR1cmVCdG4oIklURU0gRVNQIiwgIkFmZmljaGUgbCdpbWFnZSBkZSBsJ29iamV0IiwgMiwgUGFnZXMuRXNwLCBmdW5jdGlvbih0KQogICAgdC5UZXh0Q29sb3IzID0gVEhFTUUuU2Vjb25kYXJ5OyB0LlRleHQgPSAiSVRFTSBFU1AgOiBPTiIKICAgIGV4ZWN1dGVJdGVtRXNwKCkKZW5kKQoKLS0gUEFHRSBCT09TVApjcmVhdGVGZWF0dXJlQnRuKCJGUFMgQk9PU1QiLCAiT3B0aW1pc2F0aW9uIG1heGltYWxlIiwgMSwgUGFnZXMuQm9vc3QsIGZ1bmN0aW9uKHQpCiAgICB0LlRleHRDb2xvcjMgPSBUSEVNRS5TZWNvbmRhcnk7IHQuVGV4dCA9ICJGUFMgQk9PU1QgOiBPTiIKICAgIGV4ZWN1dGVGcHNCb29zdCgpCmVuZCk=